import{L as x,r,P as l,I as e}from"./index-B9naN4yU.js";import{J as f}from"./JobPostingForm-ByP_uHsn.js";import"./briefcase-DbQSCWoo.js";import"./map-pin-44POnF4l.js";import"./loader-circle-DAXvA_zu.js";const S=()=>{const a=x(),[m,i]=r.useState(!1),[c,n]=r.useState(null),[s,u]=r.useState(null),[b,d]=r.useState(!0);r.useEffect(()=>{h()},[]);const h=async()=>{try{d(!0);const t=(await l.get("/current-user")).data;u(t)}catch(o){console.error("Error fetching user:",o),n("Failed to load user data. Please try again."),a("/dashboard/company")}finally{d(!1)}},p=async o=>{try{if(i(!0),n(null),!(s!=null&&s.companyId))throw new Error("No company ID found");const t={...o,postedDate:new Date().toISOString(),company:{id:s.companyId}};await l.post("/jobs",t),a("/dashboard/company")}catch(t){console.error("Error posting job:",t),n(t.message||"Failed to post job. Please try again.")}finally{i(!1)}},g=()=>{a("/dashboard/company")};return b?e.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 sm:h-12 sm:w-12 border-t-2 border-b-2 border-indigo-600"})}):s!=null&&s.companyId?e.jsxs("div",{className:"h-screen overflow-hidden bg-gray-50",children:[c&&e.jsx("div",{className:"fixed top-4 right-4 z-50 p-3 sm:p-4 bg-red-50 border border-red-200 rounded-lg shadow-lg",children:e.jsx("p",{className:"text-sm sm:text-base text-red-600",children:c})}),e.jsx("div",{className:"h-full overflow-y-auto",children:e.jsx(f,{onClose:g,onSubmit:p,isSubmitting:m})})]}):e.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center p-4",children:e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-sm sm:text-base text-red-600 mb-4",children:"Please create a company profile first."}),e.jsx("button",{onClick:()=>a("/dashboard"),className:"px-4 py-2 bg-indigo-600 text-sm sm:text-base text-white rounded-lg hover:bg-indigo-700 transition-colors",children:"Go to Dashboard"})]})})};export{S as default};
