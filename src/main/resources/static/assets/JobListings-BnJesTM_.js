import{L as M,r,I as e,K as o,P as S,O as T,X as k}from"./index-B9naN4yU.js";import{M as q}from"./map-pin-44POnF4l.js";import{B as H}from"./briefcase-DbQSCWoo.js";import{C as P}from"./clock-DbMtkiaW.js";import{c as U}from"./index-D7rrFXLk.js";import{S as B}from"./search-BlNOOlJb.js";import{F as V}from"./funnel-DsBolQvK.js";import{M as Y}from"./mail-LGEvFtHH.js";import{G}from"./globe-BasewGgl.js";const K=({job:t,index:y,user:l,onViewJob:b,showMockInterviewButton:c})=>{var g,w;const d=M(),[p,j]=r.useState(!1),f=(g=l==null?void 0:l.appliedJobIds)==null?void 0:g.includes(t.id),N=async()=>{var x;try{if(j(!0),!l||!l.id){d("/login");return}const m=(await S.get(`/jobs/${t.id}`)).data;await S.post(`/mock-questions/generate/job/${t.id}/user/${l.id}`,{techStack:m.techStack.join(", "),jobDescription:m.description,yearsOfExperience:m.yearsOfExperience.toString()}),d(`/mock-interview/${t.id}`,{state:{userId:l.id,jobId:t.id}})}catch(h){console.error("Error starting mock interview:",h),((x=h.response)==null?void 0:x.status)===401&&d("/login")}finally{j(!1)}};return e.jsx(o.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},transition:{duration:.4,delay:y*.1},whileHover:{y:-5,boxShadow:"0 10px 25px -5px rgba(0, 0, 0, 0.1)"},className:"bg-white rounded-xl shadow-md overflow-hidden border border-gray-100",children:e.jsx("div",{className:"p-4 sm:p-6",children:e.jsxs("div",{className:"flex flex-col md:flex-row md:items-center",children:[e.jsx("div",{className:"flex-shrink-0 mb-4 md:mb-0 md:mr-6",children:t.company.logo?e.jsx("img",{src:t.company.logo,alt:`${t.company.companyName} logo`,className:"w-12 h-12 sm:w-16 sm:h-16 object-cover rounded-lg"}):e.jsx("div",{className:"w-12 h-12 sm:w-16 sm:h-16 rounded-full bg-indigo-100 flex items-center justify-center text-xl sm:text-2xl font-bold text-indigo-600",children:(w=t.company.companyName)==null?void 0:w.charAt(0).toUpperCase()})}),e.jsxs("div",{className:"flex-grow",children:[e.jsxs("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-lg sm:text-xl font-semibold text-gray-900",children:t.title}),e.jsx("p",{className:"text-indigo-600 font-medium text-sm sm:text-base",children:t.company.companyName})]}),e.jsx("div",{className:"mt-2 md:mt-0",children:e.jsxs("span",{className:"text-gray-900 font-medium text-sm sm:text-base",children:["$",t.salary?t.salary.toLocaleString():"Not specified"]})})]}),e.jsx("div",{className:"mt-3 sm:mt-4 flex flex-wrap gap-2",children:t.techStack.map(x=>e.jsx("span",{className:"px-2 sm:px-3 py-1 bg-indigo-50 text-indigo-700 rounded-full text-xs sm:text-sm",children:x},x))}),e.jsxs("div",{className:"mt-3 sm:mt-4 flex flex-wrap gap-2 md:gap-6 text-gray-600 text-sm",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx(q,{size:16,className:"mr-1"}),e.jsx("span",{children:t.location})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx(H,{size:16,className:"mr-1"}),e.jsx("span",{children:t.jobType})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx(P,{size:16,className:"mr-1"}),e.jsxs("span",{children:[t.yearsOfExperience," years experience"]})]}),t.mockInterviewRequired&&e.jsx("div",{className:"flex items-center",children:e.jsxs("span",{className:"text-indigo-600 font-medium",children:["Min Score: ",t.minimumMockScore||"Not specified","%"]})})]}),e.jsxs("div",{className:"mt-4 sm:mt-6 flex flex-col sm:flex-row gap-2 sm:gap-3",children:[f?e.jsx("div",{className:"w-full sm:w-auto flex items-center justify-center px-4 sm:px-6 py-2 sm:py-3 rounded-lg bg-green-100 text-green-800 font-medium text-sm sm:text-base",children:"âœ“ Already Applied"}):c&&e.jsx(o.div,{whileHover:{scale:1.03},whileTap:{scale:.97},className:"w-full sm:w-auto",children:e.jsx("button",{onClick:N,disabled:p,className:"w-full inline-flex justify-center items-center px-4 sm:px-6 py-2 sm:py-3 rounded-lg bg-indigo-600 text-white font-medium hover:bg-indigo-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed text-sm sm:text-base",children:p?e.jsx("div",{className:"animate-spin rounded-full h-4 w-4 sm:h-5 sm:w-5 border-b-2 border-white"}):"Start Mock Interview"})}),e.jsx(o.button,{whileHover:{scale:1.03},whileTap:{scale:.97},onClick:()=>b(t),className:"w-full sm:w-auto inline-flex justify-center items-center px-4 sm:px-6 py-2 sm:py-3 rounded-lg border border-gray-300 text-gray-700 font-medium hover:bg-gray-50 transition-colors text-sm sm:text-base",children:"View"}),f&&e.jsx(o.button,{whileHover:{scale:1.03},whileTap:{scale:.97},onClick:()=>d(`/feedback/${t.id}`),className:"w-full sm:w-auto inline-flex justify-center items-center px-4 sm:px-6 py-2 sm:py-3 rounded-lg border border-indigo-300 text-indigo-700 font-medium hover:bg-indigo-50 transition-colors text-sm sm:text-base",children:"View Application"})]})]})]})})})},ae=()=>{const[t,y]=r.useState(""),[l,b]=r.useState([]),[c,d]=r.useState(""),[p,j]=r.useState([]),[f,N]=r.useState([]),[g,w]=r.useState(!1),[x,h]=r.useState(!0),[m,F]=r.useState(null),[C,L]=r.useState(null),[z,E]=r.useState(!1),[a,O]=r.useState(null),J=M();r.useEffect(()=>{window.scrollTo(0,0)},[]),r.useEffect(()=>{(async()=>{try{const i=await S.get("/current-user");F(i.data)}catch(i){console.error("Error fetching user details:",i),U.error("Failed to fetch user data"),J("/login")}})()},[]),r.useEffect(()=>{(async()=>{var i,n,v;try{h(!0);const u=await S.get("/jobs");j(u.data),N(u.data)}catch(u){((i=u.response)==null?void 0:i.status)===401?J("/login"):L(((v=(n=u.response)==null?void 0:n.data)==null?void 0:v.message)||"Failed to fetch jobs")}finally{h(!1)}})()},[]),r.useEffect(()=>{let s=p;if(t){const i=t.toLowerCase();s=s.filter(n=>n.title.toLowerCase().includes(i)||n.company.companyName.toLowerCase().includes(i)||n.location.toLowerCase().includes(i))}l.length>0&&(s=s.filter(i=>l.every(n=>i.techStack.includes(n)))),c&&(s=s.filter(i=>{const n=i.yearsOfExperience,v=parseInt(c);return n<=v})),N(s)},[t,l,c,p]);const I=s=>{b(i=>i.includes(s)?i.filter(n=>n!==s):[...i,s])},$=()=>{y(""),b([]),d("")},D=[...new Set(p.flatMap(s=>s.techStack))].sort(),A=["0-1 years","1-2 years","2+ years","3+ years","5+ years"],R=s=>{O(s),E(!0)};return x?e.jsx("div",{className:"pt-24 pb-16 min-h-screen bg-gray-50 flex items-center justify-center",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-indigo-600"})}):C?e.jsx("div",{className:"pt-24 pb-16 min-h-screen bg-gray-50 flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Error"}),e.jsx("p",{className:"text-gray-600",children:C})]})}):e.jsx("div",{className:"pt-24 pb-16 min-h-screen bg-gray-50",children:e.jsxs("div",{className:"container mx-auto px-4 md:px-6",children:[e.jsxs("div",{className:"mb-8",children:[e.jsx(o.h1,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},className:"text-3xl md:text-4xl font-bold text-gray-900",children:"Find Your Perfect Job"}),e.jsx(o.p,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5,delay:.1},className:"mt-2 text-lg text-gray-600",children:"Browse through our curated list of opportunities"})]}),e.jsxs("div",{className:"mb-8",children:[e.jsxs("div",{className:"flex flex-col md:flex-row gap-4",children:[e.jsxs("div",{className:"relative flex-grow",children:[e.jsx(B,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400",size:20}),e.jsx("input",{type:"text",placeholder:"Search jobs, companies, or locations...",value:t,onChange:s=>y(s.target.value),className:"w-full pl-10 pr-4 py-3 rounded-lg border border-gray-300 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-transparent"})]}),e.jsxs(o.button,{whileHover:{scale:1.02},whileTap:{scale:.98},onClick:()=>w(!g),className:"flex items-center justify-center px-4 py-3 rounded-lg bg-white border border-gray-300 text-gray-700 hover:bg-gray-50 md:w-auto",children:[e.jsx(V,{size:20,className:"mr-2"}),"Filters"]})]}),e.jsx(T,{children:g&&e.jsxs(o.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},transition:{duration:.3},className:"mt-4 bg-white rounded-lg border border-gray-300 p-4 overflow-hidden",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsx("h3",{className:"font-semibold text-gray-900",children:"Filter Jobs"}),e.jsx("button",{onClick:$,className:"text-sm text-indigo-600 hover:text-indigo-800",children:"Clear all filters"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium text-gray-700 mb-2",children:"Tech Stack"}),e.jsx("div",{className:"flex flex-wrap gap-2",children:D.map(s=>e.jsx("button",{onClick:()=>I(s),className:`px-3 py-1 rounded-full text-sm ${l.includes(s)?"bg-indigo-100 text-indigo-800 border-indigo-300":"bg-gray-100 text-gray-800 border-gray-200"} border hover:bg-indigo-100 hover:text-indigo-800 transition-colors`,children:s},s))})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium text-gray-700 mb-2",children:"Experience Level"}),e.jsx("div",{className:"flex flex-wrap gap-2",children:A.map(s=>e.jsx("button",{onClick:()=>d(s===c?"":s),className:`px-3 py-1 rounded-full text-sm ${s===c?"bg-indigo-100 text-indigo-800 border-indigo-300":"bg-gray-100 text-gray-800 border-gray-200"} border hover:bg-indigo-100 hover:text-indigo-800 transition-colors`,children:s},s))})]})]})]})}),(l.length>0||c)&&e.jsxs("div",{className:"mt-4 flex flex-wrap gap-2",children:[l.map(s=>e.jsxs("div",{className:"flex items-center bg-indigo-100 text-indigo-800 px-3 py-1 rounded-full text-sm",children:[s,e.jsx("button",{onClick:()=>I(s),className:"ml-1 focus:outline-none",children:e.jsx(k,{size:14})})]},s)),c&&e.jsxs("div",{className:"flex items-center bg-indigo-100 text-indigo-800 px-3 py-1 rounded-full text-sm",children:[c," experience",e.jsx("button",{onClick:()=>d(""),className:"ml-1 focus:outline-none",children:e.jsx(k,{size:14})})]})]})]}),e.jsx("div",{className:"grid grid-cols-1 gap-6",children:e.jsx(T,{children:f.length>0?f.map((s,i)=>e.jsx(K,{job:s,index:i,user:m,onViewJob:R,showMockInterviewButton:(m==null?void 0:m.role)==="User"},s.id)):e.jsxs(o.div,{initial:{opacity:0},animate:{opacity:1},className:"text-center py-12",children:[e.jsx("h3",{className:"text-xl font-medium text-gray-900 mb-2",children:"No jobs found"}),e.jsx("p",{className:"text-gray-600",children:"Try adjusting your search or filters"})]})})}),z&&a&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/20 backdrop-blur-sm",children:e.jsxs(o.div,{initial:{opacity:0,y:-50},animate:{opacity:1,y:0},exit:{opacity:0,y:-50},className:"bg-white rounded-2xl shadow-2xl max-w-3xl w-full mx-4 sm:mx-0 p-0 relative max-h-[90vh] overflow-y-auto",children:[e.jsx("button",{className:"absolute top-4 right-4 sm:top-6 sm:right-6 text-gray-400 hover:text-gray-700 text-2xl p-2 rounded-full hover:bg-gray-100 transition-colors",onClick:()=>E(!1),children:e.jsx(k,{size:24})}),e.jsx("div",{className:"p-4 sm:p-8 pb-0",children:e.jsx("h2",{className:"text-2xl sm:text-3xl font-bold mb-4 sm:mb-6 text-indigo-700",children:"Job Details"})}),e.jsx("div",{className:"p-4 sm:p-8",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 sm:gap-6",children:[e.jsxs("div",{className:"bg-white rounded-xl p-4 sm:p-6 flex flex-col justify-between border border-gray-100 shadow-sm",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg sm:text-xl font-semibold text-gray-900 mb-2",children:a.title}),e.jsx("p",{className:"text-indigo-600 font-medium mb-3 sm:mb-4",children:a.company.companyName}),e.jsxs("div",{className:"space-y-2 text-gray-600 text-sm sm:text-base",children:[e.jsxs("p",{children:[e.jsx("span",{className:"font-medium",children:"Location:"})," ",a.location]}),e.jsxs("p",{children:[e.jsx("span",{className:"font-medium",children:"Job Type:"})," ",a.jobType]}),e.jsxs("p",{children:[e.jsx("span",{className:"font-medium",children:"Experience:"})," ",a.yearsOfExperience," years"]}),e.jsxs("p",{children:[e.jsx("span",{className:"font-medium",children:"Tech Stack:"})," ",a.techStack.join(", ")]})]}),e.jsxs("div",{className:"mt-3 sm:mt-4",children:[e.jsx("h4",{className:"font-medium text-gray-900 mb-2",children:"Description"}),e.jsx("p",{className:"text-gray-600 text-sm sm:text-base",children:a.description})]})]}),e.jsxs("div",{className:"mt-4 sm:mt-6 flex flex-col sm:flex-row sm:items-center justify-between gap-2",children:[e.jsxs("span",{className:"text-xl sm:text-2xl font-bold text-indigo-700",children:["$",a.salary?a.salary.toLocaleString():"Not specified"]}),e.jsxs("div",{className:"flex flex-col text-right text-xs sm:text-sm text-gray-600",children:[e.jsxs("span",{children:[e.jsx("span",{className:"font-medium",children:"Mock Interview Required:"})," ",a.mockInterviewRequired?"Yes":"No"]}),a.mockInterviewRequired&&e.jsxs(e.Fragment,{children:[e.jsxs("span",{children:[e.jsx("span",{className:"font-medium",children:"Minimum Score:"})," ",a.minimumMockScore||"Not specified","%"]}),e.jsxs("span",{children:[e.jsx("span",{className:"font-medium",children:"Interview Weight:"})," ",a.mockInterviewPercentage||"Not specified","%"]})]})]})]})]}),e.jsxs("div",{className:"bg-white rounded-xl p-4 sm:p-6 flex flex-col justify-between border border-gray-100 shadow-sm",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"text-base sm:text-lg font-semibold text-gray-900 mb-2",children:"About the Company"}),e.jsx("div",{className:"text-gray-700 text-sm sm:text-base mb-3",children:a.company.description})]}),e.jsxs("div",{className:"flex flex-wrap gap-3 text-xs sm:text-sm text-gray-600 mt-2 items-center",children:[e.jsxs("span",{className:"flex items-center",children:[e.jsx(Y,{size:14,className:"mr-1"}),a.company.companyEmail]}),a.company.website&&e.jsxs("span",{className:"flex items-center",children:[e.jsx(G,{size:14,className:"mr-1"}),e.jsx("a",{href:a.company.website,target:"_blank",rel:"noopener noreferrer",className:"text-indigo-600 hover:underline",children:a.company.website.replace(/^https?:\/\/(www\.)?/,"")})]})]})]})]})})]})})]})})};export{ae as default};
